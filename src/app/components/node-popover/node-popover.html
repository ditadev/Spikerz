@if (popoverData()) {
  <div class="w-full">
    <h2 class="text-lg md:text-xl font-bold text-emerald-600 mb-4 md:mb-6">Lorem Ipsum Dolor Sit</h2>

    <div class="flex flex-col lg:flex-row gap-4 md:gap-5">
      <div class="flex-1 border border-gray-200 rounded-2xl shadow-sm overflow-hidden">
        <div class="px-6 md:px-8 pt-6 md:pt-8 pb-3 border-b border-gray-200">
          <div class="flex items-center justify-between">
            <h3 class="font-normal" style="font-size: 0.8125rem; line-height: 1.125rem; letter-spacing: 0.025rem; color: #858D9D;">Asset</h3>
            <h3 class="font-normal" style="font-size: 0.8125rem; line-height: 1.125rem; letter-spacing: 0.025rem; color: #858D9D;">Contextual Risk</h3>
          </div>
        </div>
          
        <div class="divide-y divide-gray-200">
          @for (asset of paginatedAssets; track asset.id) {
            <div class="flex items-center justify-between px-6 md:px-8 py-3 hover:bg-gray-50 transition-colors">
              <div class="flex items-center gap-3 flex-1 min-w-0">
                <img 
                  src="assets/icons/server.svg" 
                  alt="server" 
                  style="width: 45px; height: 45px; min-width: 45px; min-height: 45px;"
                  class="flex-shrink-0">
                <div class="min-w-0 flex-1">
                  <div class="text-sm font-medium text-gray-900 truncate">{{ asset.name }}</div>
                  <div class="text-xs text-gray-500">{{ asset.ipAddress }}</div>
                </div>
              </div>
              <span [ngClass]="{
                'bg-red-100 text-red-600': asset.riskLevel === 'Critical',
                'bg-orange-100 text-orange-600': asset.riskLevel === 'High',
                'bg-yellow-100 text-yellow-600': asset.riskLevel === 'Medium',
                'bg-emerald-100 text-emerald-600': asset.riskLevel === 'Low'
              }" class="px-3 md:px-4 py-1 text-xs font-semibold rounded-full ml-2 md:ml-3 whitespace-nowrap flex-shrink-0">
                {{ asset.riskLevel }}
              </span>
            </div>
          }
        </div>

        <div class="flex items-center justify-center gap-4 text-sm text-gray-600 px-6 md:px-8 py-3 border-t border-gray-200">
          <button 
            (click)="prevPage()"
            [disabled]="currentPage() === 1"
            [class.opacity-30]="currentPage() === 1"
            [class.cursor-not-allowed]="currentPage() === 1"
            class="hover:text-gray-900 transition-colors text-xl font-light">
            ‹
          </button>
          <span class="text-xs">
            Showing {{ (currentPage() - 1) * pageSize + 1 }}-{{ Math.min(currentPage() * pageSize, popoverData()!.details.assets.length) }} of {{ popoverData()!.details.assets.length }}
          </span>
          <button 
            (click)="nextPage()"
            [disabled]="currentPage() === totalPages"
            [class.opacity-30]="currentPage() === totalPages"
            [class.cursor-not-allowed]="currentPage() === totalPages"
            class="hover:text-gray-900 transition-colors text-xl font-light">
            ›
          </button>
        </div>
      </div>

      <div class="flex-1 border border-gray-200 rounded-2xl p-6 md:p-8 shadow-sm">
        <h3 class="font-normal mb-6" style="font-size: 0.8125rem; line-height: 1.125rem; letter-spacing: 0.025rem; color: #858D9D;">Contextual Risk</h3>
        
        <div class="flex flex-col items-center md:flex-row md:items-center md:justify-between gap-6">
          <div class="space-y-3 flex-shrink-0">
            <div class="flex items-center gap-3">
              <div class="w-3 h-3 rounded-full bg-red-500 flex-shrink-0"></div>
              <span class="font-normal" style="font-size: 0.9375rem; line-height: 1; color: #383874;">
                <span class="font-bold">{{ popoverData()!.details.riskSummary.critical }}</span> Critical
              </span>
            </div>
            <div class="flex items-center gap-3">
              <div class="w-3 h-3 rounded-full bg-orange-500 flex-shrink-0"></div>
              <span class="font-normal" style="font-size: 0.9375rem; line-height: 1; color: #383874;">
                <span class="font-bold">{{ popoverData()!.details.riskSummary.high }}</span> High
              </span>
            </div>
            <div class="flex items-center gap-3">
              <div class="w-3 h-3 rounded-full bg-yellow-500 flex-shrink-0"></div>
              <span class="font-normal" style="font-size: 0.9375rem; line-height: 1; color: #383874;">
                <span class="font-bold">{{ popoverData()!.details.riskSummary.medium }}</span> Medium
              </span>
            </div>
            <div class="flex items-center gap-3">
              <div class="w-3 h-3 rounded-full bg-emerald-500 flex-shrink-0"></div>
              <span class="font-normal" style="font-size: 0.9375rem; line-height: 1; color: #383874;">
                <span class="font-bold">{{ popoverData()!.details.riskSummary.low }}</span> Low
              </span>
            </div>
          </div>

          <div class="flex-shrink-0">
            <div class="relative w-32 h-32">
              <svg viewBox="0 0 120 120" class="transform -rotate-90 w-full h-full">
                <circle
                  cx="60"
                  cy="60"
                  r="50"
                  fill="none"
                  stroke="#F3F4F6"
                  stroke-width="10"
                />
                
                <circle
                  cx="60"
                  cy="60"
                  r="50"
                  fill="none"
                  stroke="#C6190D"
                  stroke-width="10"
                  [attr.stroke-dasharray]="getCircumference()"
                  [attr.stroke-dashoffset]="getDashOffset()"
                  stroke-linecap="round"
                  class="donut-segment"
                />
              </svg>
              
              <div class="absolute inset-0 flex flex-col items-center justify-center">
                <span class="font-semibold text-center" style="font-size: 2.1875rem; line-height: 1.75rem; color: #656575;">{{ popoverData()!.details.riskSummary.critical }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
}